(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},8870:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>g,originalPathname:()=>d,pages:()=>c,routeModule:()=>p,tree:()=>u});var n=r(7096),a=r(6132),i=r(7284),s=r.n(i),o=r(2564),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let u=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3982)),"/Users/maverick/Desktop/DrawUI_public/app/page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,5345)),"/Users/maverick/Desktop/DrawUI_public/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/maverick/Desktop/DrawUI_public/app/page.tsx"],d="/page",g={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},3470:(e,t,r)=>{Promise.resolve().then(r.bind(r,4028))},4028:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Home});var n=r(784),a=r(3642),i=r.n(a);r(8582);var s=r(610),o=r(7687);let l=null;function getBrowserCanvasMaxSize(){return l||(l=calculateBrowserCanvasMaxSize()),l}async function calculateBrowserCanvasMaxSize(){let e=await o.Z.maxWidth({usePromise:!0}),t=await o.Z.maxHeight({usePromise:!0}),r=await o.Z.maxArea({usePromise:!0});return{maxWidth:e.width,maxHeight:t.height,maxArea:r.width*r.height}}let u=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"!=typeof Int32Array&&(u=new Int32Array(u));let crc=(e,t)=>{let r=0===t?0:-1^~~t;for(let t=0;t<e.length;t++)r=u[(r^e[t])&255]^r>>>8;return -1^r};let PngHelpers=class PngHelpers{static isPng(e,t){return 137===e.getUint8(t+0)&&80===e.getUint8(t+1)&&78===e.getUint8(t+2)&&71===e.getUint8(t+3)&&13===e.getUint8(t+4)&&10===e.getUint8(t+5)&&26===e.getUint8(t+6)&&10===e.getUint8(t+7)}static getChunkType(e,t){return[String.fromCharCode(e.getUint8(t)),String.fromCharCode(e.getUint8(t+1)),String.fromCharCode(e.getUint8(t+2)),String.fromCharCode(e.getUint8(t+3))].join("")}static readChunks(e,t=0){let r={};if(!PngHelpers.isPng(e,t))throw Error("Not a PNG");for(t+=8;t<=e.buffer.byteLength;){let n=t,a=e.getInt32(t);t+=4;let i=PngHelpers.getChunkType(e,t);if("IDAT"===i&&r[i]){t+=a+4+4;continue}if("IEND"===i)break;r[i]={start:n,dataOffset:t+4,size:a},t+=a+4+4}return r}static parsePhys(e,t){return{ppux:e.getUint32(t),ppuy:e.getUint32(t+4),unit:e.getUint8(t+4)}}static findChunk(e,t){let r=PngHelpers.readChunks(e);return r[t]}static setPhysChunk(e,t=1,r){let n=46,a=0,i=PngHelpers.findChunk(e,"pHYs");i&&(n=i.start,a=i.size);let s=PngHelpers.findChunk(e,"IDAT");s&&(n=s.start,a=0);let o=new ArrayBuffer(21),l=new DataView(o);l.setUint32(0,9),l.setUint8(4,112),l.setUint8(5,72),l.setUint8(6,89),l.setUint8(7,115),l.setInt32(8,2835.5*t),l.setInt32(12,2835.5*t),l.setInt8(16,1);let u=new Uint8Array(o.slice(4,17));l.setInt32(17,crc(u));let c=e.buffer.slice(0,n),d=e.buffer.slice(n+a);return new Blob([c,o,d],r)}};async function getSvgAsImage(e,t){let{type:r,quality:n,scale:a}=t,i=+e.getAttribute("width"),s=+e.getAttribute("height"),o=i*a,l=s*a,u=await getSvgAsDataUrl(e),c=await getBrowserCanvasMaxSize();if(i>c.maxWidth&&(l=(o=c.maxWidth)/i*s),s>c.maxHeight&&(o=(l=c.maxHeight)/s*i),o*l>c.maxArea){let e=Math.sqrt(c.maxArea/(o*l));o*=e,l*=e}o=Math.floor(o),l=Math.floor(l);let d=o/i,g=await new Promise(e=>{let t=new Image;t.crossOrigin="anonymous",t.onload=async()=>{await new Promise(e=>setTimeout(e,250));let r=document.createElement("canvas"),n=r.getContext("2d");r.width=o,r.height=l,n.imageSmoothingEnabled=!0,n.imageSmoothingQuality="high",n.drawImage(t,0,0,o,l),URL.revokeObjectURL(u),e(r)},t.onerror=()=>{e(null)},t.src=u});if(!g)return null;let p=await new Promise(e=>g.toBlob(t=>{t||e(null),e(t)},"image/"+r,n));if(!p)return null;let m=new DataView(await p.arrayBuffer());return PngHelpers.setPhysChunk(m,d,{type:"image/"+r})}async function getSvgAsDataUrl(e){let t=e.cloneNode(!0);t.setAttribute("encoding",'UTF-8"');let r=new FileReader,n=Array.from(t.querySelectorAll("image"));for(let e of n){let t=e.getAttribute("xlink:href");if(t&&!t.startsWith("data:")){let n=await (await fetch(t)).blob(),a=await new Promise((e,t)=>{r.onload=()=>e(r.result),r.onerror=()=>t(r.error),r.readAsDataURL(n)});e.setAttribute("xlink:href",a)}}return getSvgAsDataUrlSync(t)}function getSvgAsDataUrlSync(e){let t=new XMLSerializer().serializeToString(e),r=window.btoa(unescape(encodeURIComponent(t)));return`data:image/svg+xml;base64,${r}`}function blobToBase64(e){return new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>t(n.result),n.readAsDataURL(e)})}var c=r(9885),d=r(8908),g=r.n(d),p=r(8713),m=r.n(p);function PreviewModal({html:e,setHtml:t}){let[r,a]=(0,c.useState)("preview");return((0,c.useEffect)(()=>{let highlight=async()=>{await m().highlightAll()};highlight()},[e,r]),e)?(0,n.jsxs)("div",{onClick:e=>{e.stopPropagation()},className:"bg-white rounded-lg shadow-xl flex flex-col",style:{width:"calc(100% - 64px)",height:"calc(100% - 64px)"},children:[(0,n.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,n.jsxs)("div",{className:"flex space-x-1",children:[n.jsx(TabButton,{active:"preview"===r,onClick:()=>{a("preview")},children:"Preview"}),n.jsx(TabButton,{active:"code"===r,onClick:()=>{a("code")},children:"Code"})]}),n.jsx("button",{className:"p-2 rounded-md hover:bg-gray-200 focus:outline-none focus:ring",onClick:()=>{t(null)},children:n.jsx("svg",{className:"w-6 h-6 text-gray-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),"preview"===r?n.jsx("iframe",{className:"w-full h-full",srcDoc:e}):n.jsx("pre",{className:"overflow-auto p-4",children:n.jsx("code",{className:"language-markup",children:e})})]}):null}function TabButton({active:e,...t}){return n.jsx("button",{className:e?"px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-t-md focus:outline-none focus:ring":"px-4 py-2 text-sm font-medium text-blue-500 bg-transparent hover:bg-blue-100 focus:bg-blue-100 rounded-t-md focus:outline-none focus:ring",...t})}r(5497),r(4105);let h=i()(async()=>(await Promise.resolve().then(r.bind(r,610))).Tldraw,{loadableGenerated:{modules:["/Users/maverick/Desktop/DrawUI_public/app/page.tsx -> @tldraw/tldraw"]},ssr:!1});function Home(){let[e,t]=(0,c.useState)(null);return(0,c.useEffect)(()=>{let listener=e=>{"Escape"===e.key&&t(null)};return window.addEventListener("keydown",listener),()=>{window.removeEventListener("keydown",listener)}}),(0,n.jsxs)(n.Fragment,{children:[n.jsx("div",{className:"w-screen h-screen",children:n.jsx(h,{persistenceKey:"tldraw",children:n.jsx(ExportButton,{setHtml:t})})}),e&&g().createPortal(n.jsx("div",{className:"fixed top-0 left-0 right-0 bottom-0 flex justify-center items-center",style:{zIndex:2e3,backgroundColor:"rgba(0,0,0,0.5)"},onClick:()=>t(null),children:n.jsx(PreviewModal,{html:e,setHtml:t})}),document.body)]})}function ExportButton({setHtml:e}){let t=(0,s.useEditor)(),[r,a]=(0,c.useState)(!1);return n.jsx("button",{onClick:async r=>{a(!0);try{r.preventDefault();let n=await t.getSvg(Array.from(t.currentPageShapeIds));if(!n)return;let a=await getSvgAsImage(n,{type:"png",quality:1,scale:1}),i=await blobToBase64(a),s=await fetch("/api/toHtml",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:i})}),o=await s.json();if(o.error){alert("Error from open ai: "+JSON.stringify(o.error));return}let l=o.choices[0].message.content,u=l.indexOf("<!DOCTYPE html>"),c=l.indexOf("</html>"),d=l.slice(u,c+7);e(d)}finally{a(!1)}},className:"fixed bottom-4 right-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded =",style:{zIndex:1e3},disabled:r,children:r?n.jsx("div",{className:"flex justify-center items-center ",children:n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})}):"Make Real"})}},3982:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>s,__esModule:()=>i,default:()=>l});var n=r(5153);let a=(0,n.createProxy)(String.raw`/Users/maverick/Desktop/DrawUI_public/app/page.tsx`),{__esModule:i,$$typeof:s}=a,o=a.default,l=o},7481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var n=r(8531);let __WEBPACK_DEFAULT_EXPORT__=e=>{let t=(0,n.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:t+""}]}}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[214,722,225],()=>__webpack_exec__(8870));module.exports=r})();